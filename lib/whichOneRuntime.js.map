{"version":3,"sources":["../src/whichOneRuntime.js"],"names":["whichOneRuntime","maybeInWebView","window","maybeInWeexVueEnv","weex","maybeInNative","callNative","snifferWeexRaxMap","snifferWebViewMap","snifferWeexVueMap","snifferMachine","snifferMap","source","j","length","i","result"],"mappings":";;;;;kBAqCwBA,e;AArCxB,IAAMC,iBAAiB,OAAOC,MAAP,KAAkB,WAAzC;AACA,IAAMC,oBAAoB,OAAOC,IAAP,KAAgB,WAA1C;AACA,IAAMC,gBAAgB,OAAOC,UAAP,KAAsB,WAA5C;;AAEA,IAAMC,oBAAoB,CACxB,iBADwB,EAExB,kBAFwB,EAGxB,kBAHwB,CAA1B;;AAMA,IAAMC,oBAAoB,CACxB,cADwB,EAExB,UAFwB,EAGxB,WAHwB,EAIxB,gBAJwB,CAA1B;;AAOA,IAAMC,oBAAoB,CACxB,QADwB,EAExB,eAFwB,EAGxB,UAHwB,CAA1B;;AAMA;AACA,SAASC,cAAT,CAAwBC,UAAxB,EAAmCC,MAAnC,EAA0C;AACxC,MAAMC,IAAIF,WAAWG,MAArB;AACA,MAAIC,IAAI,CAAR;AACA,MAAIC,SAAS,IAAb;AACA,SAAKD,IAAIF,CAAT,EAAYE,GAAZ,EAAgB;AACd,QAAI,CAACH,OAAOD,WAAWI,CAAX,CAAP,CAAL,EAA2B;AACzBC,eAAS,KAAT;AACA;AACD;AACF;AACD,SAAOA,MAAP;AACD;;AAEc,SAAShB,eAAT,GAA0B;AACvC,MAAIC,kBAAkBE,iBAAtB,EAAwC;AACtC;AACA,WAAOO,eAAeD,iBAAf,EAAiCL,IAAjC,IAAyC,SAAzC,GAAqD,aAA5D;AACD,GAHD,MAGO,IAAI,CAACH,cAAD,IAAmBE,iBAAvB,EAAyC;AAC9C;AACA,WAAOO,eAAeD,iBAAf,EAAiCL,IAAjC,IAAyC,UAAzC,GAAsD,cAA7D;AACD,GAHM,MAGA,IAAIH,kBAAkBI,aAAlB,IAAmC,CAACF,iBAAxC,EAA0D;AAC/D;AACA,WAAOO,eAAeH,iBAAf,EAAiCL,MAAjC,IAA2C,UAA3C,GAAwD,cAA/D;AACD,GAHM,MAGA;AACL;AACA,QAAID,cAAJ,EAAmB;AACjB,aAAOS,eAAeF,iBAAf,EAAiCN,MAAjC,IAA2C,aAA3C,GAA2D,iBAAlE;AACD;AACF;AACD,SAAO,iBAAP;AACD","file":"whichOneRuntime.js","sourcesContent":["const maybeInWebView = typeof window !== 'undefined';\nconst maybeInWeexVueEnv = typeof weex !== 'undefined';\nconst maybeInNative = typeof callNative !== 'undefined';\n\nconst snifferWeexRaxMap = [\n  '__weex_config__',\n  '__weex_options__',\n  '__weex_require__'\n];\n\nconst snifferWebViewMap = [\n  'localStorage',\n  'location',\n  'navigator',\n  'XMLHttpRequest'\n];\n\nconst snifferWeexVueMap = [\n  'config',\n  'requireModule',\n  'document'\n];\n\n// 嗅探器\nfunction snifferMachine(snifferMap,source){\n  const j = snifferMap.length;\n  let i = 0;\n  let result = true;\n  for(;i < j; i++){\n    if (!source[snifferMap[i]]){\n      result = false;\n      break;\n    }\n  }\n  return result;\n}\n\nexport default function whichOneRuntime(){\n  if (maybeInWebView && maybeInWeexVueEnv){\n    // webview\n    return snifferMachine(snifferWeexVueMap,weex) ? 'Web.Vue' : 'Web.Unknown';\n  } else if (!maybeInWebView && maybeInWeexVueEnv){\n    // native\n    return snifferMachine(snifferWeexVueMap,weex) ? 'Weex.Vue' : 'Weex.Unknown';\n  } else if (maybeInWebView && maybeInNative && !maybeInWeexVueEnv){\n    // native\n    return snifferMachine(snifferWeexRaxMap,window) ? 'Weex.Rax' : 'Weex.Unknown';\n  } else {\n    // default webview\n    if (maybeInWebView){\n      return snifferMachine(snifferWebViewMap,window) ? 'Web.Unknown' : 'Unknown.Unknown';\n    } \n  }\n  return 'Unknown.Unknown';\n}"]}